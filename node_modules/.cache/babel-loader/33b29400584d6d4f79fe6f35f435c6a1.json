{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\\\u041C\\u0430\\u0440\\u0438\\u043D\\u0430\\\\Desktop\\\\hakaton\\\\OrVisheGor_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useMemo}from'react';import{withRouter,Link}from'react-router-dom';import accounting from'accounting';import Checkbox from'./Checkbox';import edit from\"../img/edit.svg\";import'./place.css';var Basket=function Basket(_ref){var _ref$match$params=_ref.match.params,areaId=_ref$match$params.areaId,itemId=_ref$match$params.itemId,foodAreas=_ref.foodAreas,order=_ref.order,ordersParameters=_ref.ordersParameters,setFaster=_ref.setFaster,setTime=_ref.setTime,setSelfService=_ref.setSelfService;var faster=ordersParameters.faster,time=ordersParameters.time,selfService=ordersParameters.selfService;var area=foodAreas.filter(function(area){return area.id===areaId;})[0];var item=area.items.filter(function(item){return item.id===itemId;})[0];var _useMemo=useMemo(function(){var foodIds=new Set((item.foods||[]).map(function(item){return item.id;}));var products=Object.values(order).filter(function(value){var id=value.item.id;return foodIds.has(id);});var result=products.reduce(function(result,value){var count=value.count,item=value.item;return result+parseInt(item.price)*parseInt(count);},0);return[accounting.formatNumber(result,0,' '),products];},[order,item]),_useMemo2=_slicedToArray(_useMemo,2),price=_useMemo2[0],products=_useMemo2[1];return/*#__PURE__*/React.createElement(\"div\",{className:\"Place\"},/*#__PURE__*/React.createElement(\"header\",{className:\"Place__header\"},/*#__PURE__*/React.createElement(\"aside\",{className:\"Place__trz\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"Place__head\"},/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"Place__logo\"},area.name)),/*#__PURE__*/React.createElement(Link,{to:\"/edit\",className:\"Place__change-tz\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"change-profile\",src:edit})))),/*#__PURE__*/React.createElement(\"aside\",{className:\"Place__restoraunt\"},/*#__PURE__*/React.createElement(\"img\",{className:\"Place__restoraunt-logo\",alt:\"Fastfood logo\",src:item.image}),/*#__PURE__*/React.createElement(\"h2\",{className:\"Place__restoraunt-name\"},item.name),/*#__PURE__*/React.createElement(\"p\",{className:\"Place__restoraunt-type\"},item.description)),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__products-wrapper\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"Place__products\"},products.map(function(_ref2){var item=_ref2.item,count=_ref2.count;return/*#__PURE__*/React.createElement(\"li\",{className:\"Place__product\",key:item.id},/*#__PURE__*/React.createElement(\"img\",{className:\"Place__product-logo\",alt:\"Ordered product logo\",src:item.image}),/*#__PURE__*/React.createElement(\"h3\",{className:\"Place__product-name\"},item.name),/*#__PURE__*/React.createElement(\"p\",{className:\"Place__product-price\"},\"\\u0426\\u0435\\u043D\\u0430: \",item.price),/*#__PURE__*/React.createElement(\"p\",{className:\"Place__product-count\"},\"x\",count));})),/*#__PURE__*/React.createElement(Link,{className:\"Place__change-product\",to:\"/place/\".concat(areaId,\"/\").concat(itemId)},\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u0412\\u0440\\u0435\\u043C\\u044F:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice-item\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u041A\\u0430\\u043A \\u043C\\u043E\\u0436\\u043D\\u043E \\u0431\\u044B\\u0441\\u0442\\u0440\\u0435\\u0435\"),/*#__PURE__*/React.createElement(Checkbox,{checked:faster,onToggle:function onToggle(){if(faster){setFaster(false);}else{setTime('');setFaster(true);}}})),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice-item\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u041D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0438\\u0442\\u044C\"),/*#__PURE__*/React.createElement(\"input\",{type:\"time\",value:time,onFocus:function onFocus(){setFaster(false);},onChange:function onChange(event){setFaster(false);setTime(event.target.value);},onBlur:function onBlur(){if(time){setFaster(false);}}})),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice-item\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u0421 \\u0441\\u043E\\u0431\\u043E\\u0439\"),/*#__PURE__*/React.createElement(Checkbox,{checked:selfService,onToggle:function onToggle(){return setSelfService(!selfService);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice-item\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u041D\\u0430 \\u043C\\u0435\\u0441\\u0442\\u0435\"),/*#__PURE__*/React.createElement(Checkbox,{checked:!selfService,onToggle:function onToggle(){return setSelfService(!setSelfService);}}))),/*#__PURE__*/React.createElement(\"footer\",{className:\"Place__footer\"},/*#__PURE__*/React.createElement(Link,{to:\"/order/\".concat(area.id,\"/\").concat(item.id),className:\"Place__order\"},\"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0438\\u0442\\u044C \",price)));};export default withRouter(Basket);","map":{"version":3,"sources":["C:/Users/Марина/Desktop/hakaton/OrVisheGor_web/src/panels/Basket.js"],"names":["React","useMemo","withRouter","Link","accounting","Checkbox","Basket","match","params","areaId","itemId","foodAreas","order","ordersParameters","setFaster","setTime","setSelfService","faster","time","selfService","area","filter","id","item","items","foodIds","Set","foods","map","products","Object","values","value","has","result","reduce","count","parseInt","price","formatNumber","name","edit","image","description","event","target"],"mappings":"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","sourcesContent":["import React, { useMemo } from 'react';\nimport { withRouter, Link } from 'react-router-dom';\nimport accounting from 'accounting';\n\nimport Checkbox from './Checkbox';\n\nimport edit from '../img/edit.svg';\nimport './place.css';\n\n\nconst Basket = ({ match: { params: { areaId, itemId } }, foodAreas, order, ordersParameters, setFaster, setTime, setSelfService }) => {\n\n  const { faster, time, selfService } = ordersParameters;\n  const area = foodAreas.filter(area => area.id === areaId)[0];\n  const item = area.items.filter(item => item.id === itemId)[0];\n\n  const [price, products] = useMemo(() => {\n    const foodIds = new Set((item.foods || []).map(item => item.id));\n\n\n    const products = Object.values(order)\n      .filter((value) => {\n        const { item: { id } } = value;\n\n        return foodIds.has(id);\n      });\n\n    const result = products.reduce((result, value) => {\n      const { count, item } = value;\n\n      return result + parseInt(item.price) * parseInt(count);\n    }, 0);\n\n    return [accounting.formatNumber(result, 0, ' '), products];\n  }, [order, item]);\n\n  return (\n    <div className=\"Place\">\n      <header className=\"Place__header\">\n        <aside className=\"Place__trz\">\n          <h1 className=\"Place__head\">\n            <Link to=\"/\" className=\"Place__logo\">\n              {area.name}\n            </Link>\n          </h1>\n          <Link to=\"/edit\" className=\"Place__change-tz\">\n            <img\n              alt=\"change-profile\"\n              src={edit}\n            />\n          </Link>\n        </aside>\n      </header>\n      <aside className=\"Place__restoraunt\">\n        <img\n          className=\"Place__restoraunt-logo\"\n          alt=\"Fastfood logo\"\n          src={item.image}\n        />\n        <h2\n          className=\"Place__restoraunt-name\"\n        >\n          {item.name}\n        </h2>\n        <p className=\"Place__restoraunt-type\">\n          {item.description}\n        </p>\n      </aside>\n      <div className=\"Place__products-wrapper\">\n        <ul className=\"Place__products\">\n          {products.map(({ item, count }) => (\n            <li\n              className=\"Place__product\"\n              key={item.id}\n            >\n              <img\n                className=\"Place__product-logo\"\n                alt=\"Ordered product logo\"\n                src={item.image}\n              />\n              <h3\n                className=\"Place__product-name\"\n              >\n                {item.name}\n              </h3>\n              <p\n                className=\"Place__product-price\"\n              >\n                Цена: {item.price}\n              </p>\n              <p\n                className=\"Place__product-count\"\n              >\n                x{count}\n              </p>\n            </li>\n          ))}\n        </ul>\n        <Link\n          className=\"Place__change-product\"\n          to={`/place/${areaId}/${itemId}`}\n        >\n          Изменить\n        </Link>\n      </div>\n      <div className=\"Place__choice\">\n        <h3>Время:</h3>\n        <div className=\"Place__choice-item\">\n          <span>Как можно быстрее</span>\n          <Checkbox\n            checked={faster}\n            onToggle={() => {\n              if (faster) {\n                setFaster(false);\n              } else {\n                setTime('');\n                setFaster(true);\n              }\n            }}\n          />\n        </div>\n        <div className=\"Place__choice-item\">\n          <span>Назначить</span>\n          <input\n            type='time'\n            value={time}\n            onFocus={() => {\n              setFaster(false);\n            }}\n            onChange={event => {\n              setFaster(false);\n              setTime(event.target.value);\n            }}\n            onBlur={() => {\n              if (time) {\n                setFaster(false);\n              }\n            }}\n          />\n        </div>\n        <div className=\"Place__choice-item\">\n          <h3>С собой</h3>\n          <Checkbox checked={selfService} onToggle={() => setSelfService(!selfService)} />\n        </div>\n        <div className=\"Place__choice-item\">\n          <h3>На месте</h3>\n          <Checkbox checked={!selfService} onToggle={() => setSelfService(!setSelfService)} />\n        </div>\n      </div>\n      <footer className=\"Place__footer\">\n        <Link to={`/order/${area.id}/${item.id}`} className=\"Place__order\">\n          Оплатить {price}\n        </Link>\n      </footer>\n    </div>\n  );\n};\n\nexport default withRouter(Basket);\n"]},"metadata":{},"sourceType":"module"}